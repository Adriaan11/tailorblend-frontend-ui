@tailwind base;
@tailwind components;
@tailwind utilities;

/* Component layer for TailorBlend-specific utilities and overrides */
@layer components {
  /* Semantic form inputs */
  .tb-form-input {
    @apply w-full px-4 py-2 rounded-lg border border-gray-300 transition-colors;
    @apply focus:outline-none focus:ring-2 focus:ring-tb-accent focus:border-tb-accent;
    @apply text-text-primary bg-bg-surface;
  }

  /* Light mode placeholder styling */
  .tb-form-input::placeholder {
    @apply text-gray-500;
    opacity: 1; /* Firefox requires this */
  }

  [data-theme="dark"] .tb-form-input {
    @apply bg-gray-900 border-gray-700 text-white;
  }

  [data-theme="dark"] .tb-form-input::placeholder {
    @apply text-gray-400;
    opacity: 1;
  }

  [data-theme="dark"] .tb-form-input:focus {
    @apply ring-tb-accent border-tb-accent bg-gray-800;
  }

  .tb-form-input:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .tb-form-input--error {
    @apply border-red-500 focus:ring-red-500 focus:border-red-500;
  }

  /* Form labels */
  .tb-form-label {
    @apply text-sm font-medium text-text-primary;
  }

  /* Textarea styling */
  .tb-form-textarea {
    @apply w-full px-4 py-2 rounded-lg border border-gray-300 transition-colors;
    @apply focus:outline-none focus:ring-2 focus:ring-tb-accent focus:border-tb-accent;
    @apply text-text-primary bg-bg-surface font-mono;
  }

  /* Light mode placeholder for textarea */
  .tb-form-textarea::placeholder {
    @apply text-gray-500;
    opacity: 1;
  }

  [data-theme="dark"] .tb-form-textarea {
    @apply bg-gray-900 border-gray-700 text-white;
  }

  [data-theme="dark"] .tb-form-textarea::placeholder {
    @apply text-gray-400;
    opacity: 1;
  }

  [data-theme="dark"] .tb-form-textarea:focus {
    @apply ring-tb-accent border-tb-accent bg-gray-800;
  }

  /* Select styling */
  .tb-form-select {
    @apply w-full px-4 py-2 rounded-lg border border-gray-300 transition-colors;
    @apply focus:outline-none focus:ring-2 focus:ring-tb-accent focus:border-tb-accent;
    @apply text-text-primary bg-bg-surface;
  }

  /* Light mode placeholder for select options */
  .tb-form-select option {
    @apply text-text-primary;
  }

  .tb-form-select option[disabled] {
    @apply text-gray-500;
  }

  [data-theme="dark"] .tb-form-select {
    @apply bg-gray-900 border-gray-700 text-white;
  }

  [data-theme="dark"] .tb-form-select option {
    @apply text-white bg-gray-900;
  }

  [data-theme="dark"] .tb-form-select option[disabled] {
    @apply text-gray-400 bg-gray-800;
  }

  [data-theme="dark"] .tb-form-select:focus {
    @apply ring-tb-accent border-tb-accent bg-gray-800;
  }

  /* Form grids (responsive) */
  .tb-form-grid {
    @apply grid grid-cols-1 md:grid-cols-2 gap-4;
  }

  .tb-form-col-12 {
    @apply md:col-span-2;
  }

  .tb-form-col-6 {
    @apply md:col-span-1;
  }

  .tb-form-col-4 {
    @apply md:col-span-1;
  }

  .tb-form-col-3 {
    @apply md:col-span-1;
  }

  /* Form group (wrapper for label + input + helper) */
  .tb-form-group {
    @apply flex flex-col gap-2;
  }

  /* Form helper text */
  .tb-form-helper {
    @apply text-xs text-text-muted;
  }

  /* Form error text */
  .tb-form-error {
    @apply text-xs text-red-600 dark:text-red-400;
  }

  /* Expansion panel */
  .tb-expansion-panel {
    @apply border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden;
  }

  .tb-expansion-header {
    @apply w-full px-4 py-3 flex items-center justify-between;
    @apply bg-bg-surface dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700;
    @apply transition-colors cursor-pointer text-left;
  }

  .tb-expansion-content {
    @apply px-4 py-4 border-t border-gray-300 dark:border-gray-700;
    @apply bg-white dark:bg-gray-800;
  }

  /* Checkbox styling */
  .tb-checkbox-wrapper {
    @apply flex items-center gap-2 cursor-pointer select-none;
  }

  .tb-checkbox {
    @apply sr-only;
  }

  .tb-checkbox-visual {
    @apply w-5 h-5 rounded border-2 border-gray-300 dark:border-gray-600;
    @apply flex items-center justify-center transition-all;
    @apply bg-white dark:bg-gray-800;
  }

  .tb-checkbox:checked ~ .tb-checkbox-visual {
    @apply bg-tb-accent border-tb-accent;
  }

  .tb-checkbox:checked ~ .tb-checkbox-visual::after {
    content: 'âœ“';
    @apply text-white text-sm font-bold;
  }

  .tb-checkbox:disabled ~ .tb-checkbox-visual {
    @apply opacity-50 cursor-not-allowed;
  }

  .tb-checkbox-label {
    @apply text-text-primary font-medium;
  }

  /* Radio button styling */
  .tb-radio-group {
    @apply flex flex-col gap-2;
  }

  .tb-radio-wrapper {
    @apply flex items-center gap-2 cursor-pointer select-none;
  }

  .tb-radio {
    @apply sr-only;
  }

  .tb-radio-visual {
    @apply w-5 h-5 rounded-full border-2 border-gray-300 dark:border-gray-600;
    @apply flex items-center justify-center transition-all;
    @apply bg-white dark:bg-gray-800;
  }

  .tb-radio:checked ~ .tb-radio-visual {
    @apply border-tb-accent;
  }

  .tb-radio:checked ~ .tb-radio-visual::after {
    content: '';
    @apply w-2.5 h-2.5 rounded-full bg-tb-accent;
  }

  .tb-radio:disabled ~ .tb-radio-visual {
    @apply opacity-50 cursor-not-allowed;
  }

  .tb-radio-label {
    @apply text-text-primary font-medium;
  }

  /* Alert component */
  .tb-alert {
    @apply p-4 rounded-lg border transition-all;
  }

  .tb-alert--success {
    @apply bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800 text-green-900 dark:text-green-100;
  }

  .tb-alert--error {
    @apply bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800 text-red-900 dark:text-red-100;
  }

  .tb-alert--warning {
    @apply bg-amber-50 dark:bg-amber-950/20 border-amber-200 dark:border-amber-800 text-amber-900 dark:text-amber-100;
  }

  .tb-alert--info {
    @apply bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800 text-blue-900 dark:text-blue-100;
  }

  .tb-alert__close {
    @apply flex-shrink-0 cursor-pointer opacity-70 hover:opacity-100 transition-opacity;
  }

  /* Loading spinner */
  .tb-spinner-wrapper {
    @apply flex flex-col items-center justify-center gap-3;
  }

  .tb-spinner-wrapper--sm {
    @apply w-8 h-8;
  }

  .tb-spinner-wrapper--md {
    @apply w-12 h-12;
  }

  .tb-spinner-wrapper--lg {
    @apply w-16 h-16;
  }

  .tb-spinner {
    @apply w-full h-full border-4 border-current border-t-transparent rounded-full animate-spin;
  }

  .tb-spinner-dots {
    @apply flex gap-2 items-center justify-center h-full;
  }

  .tb-spinner-dots span {
    @apply w-2 h-2 rounded-full bg-current;
    animation: pulse 1.4s infinite;
  }

  .tb-spinner-dots span:nth-child(2) {
    animation-delay: 0.2s;
  }

  .tb-spinner-dots span:nth-child(3) {
    animation-delay: 0.4s;
  }

  .tb-spinner-bar {
    @apply h-1 w-full bg-gradient-to-r from-transparent via-current to-transparent rounded-full;
    animation: slideIn 1.5s ease-in-out infinite;
  }

  .tb-spinner-label {
    @apply text-sm font-medium text-text-muted;
  }

  @keyframes slideIn {
    0% {
      transform: translateX(-100%);
    }
    50% {
      transform: translateX(100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  /* Base surfaces */
  .tb-surface {
    @apply bg-bg-surface text-text-primary;
  }

  .tb-card {
    @apply bg-bg-surface rounded-lg shadow-tb p-6;
    @apply dark:bg-gray-800 dark:border dark:border-gray-700;
  }
}
